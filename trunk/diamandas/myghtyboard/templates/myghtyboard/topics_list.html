{% extends "pages/body.html" %}
{% load i18n %}

{% block title %}{% trans "Topics from" %} "{{ forum_name }}"{% endblock %}
{% block header %}{% trans "Topics from" %} "{{ forum_name }}"{% endblock %}
{% block crumb %}<a href="/">{% trans "Home" %}</a> > <a href="/forum/">{% trans "Forum Index" %}</a> > <a href="/forum/forum/{{ forum }}/">{{ forum_name }}</a>{% endblock %}
{% block pagemenu %}
<li><a href="/forum/add_topic/{{ forum }}/">{% trans "Add New Topic" %}</a></li>
<li><a href="/forum/">{% trans "Back to Forum" %}</a></li>
<li><a href="/forum/lasttopics/">{% trans "Last Active Topics" %}</a></li>
<li><a href="/forum/mytopics/">{% trans "My Topics" %}</a></li>
<li><a href="/forum/myptopics/">{% trans "My Posts" %}</a></li>{% endblock %}

{% block content %}
<div class="content">
          <table>
            <tr>
              <th class="first" style="width:20px;"></th>
              <th><strong>{% trans "Topic" %}</strong></th>
              <th style="width:90px;"><strong>{% trans "Author" %}</strong></th>
              <th style="width:15px;"><strong>{% trans "Posts" %}</strong></th>
              <th style="width:150px;"><strong>{% trans "Last Post" %}</strong></th>
              {% if perms.is_staff %}<th style="width:25%;"><strong>{% trans "Admin" %}</strong></th>{% endif %}
            </tr>
           {% for topic in object_list %}
            <tr class="small">
           <td class="first">
            {% if topic.is_locked %}
                    <img src="/site_media/layout/forum/lock.png" alt="*" />
            {% else %}
                    {% if topic.is_sticky %}
                            <img src="/site_media/layout/forum/stick.png" alt="*" />
                    {% else %}
                            {% if topic.is_global %}
                                    <img src="/site_media/layout/forum/glob.png" alt="*" />
                            {% else %}
                                    <img src="/site_media/layout/forum/normal.png" alt="*" />
                            {% endif%}
                    {% endif%}
            {% endif %}</td>
                          <td style="text-align:left;"><a href="/forum/topic/{{ topic.topic_last_pagination_page }}/{{ topic.id }}/">{{ topic.topic_name }}</a></td>
                          <td>{{ topic.topic_author }}</td>
                          <td>{{ topic.topic_posts }}</td>
                          <td>{{ topic.topic_lastpost|safe }}</td>
            {% if perms.is_staff %}<td>
                    <a href="/forum/delete_topic/{{ topic.id }}/{{ forum }}/" onclick="return confirm('{% trans "Delete this Topic and all Posts?" %}')">{% trans "Delete Topic" %}</a> | 
                    {% if topic.is_locked %}
                            <a href="/forum/open_topic/{{ topic.id }}/{{ forum }}/" onclick="return confirm('{% trans "Open This Topic?" %}')">{% trans "Unlock Topic" %}</a>
                    {% else %}
                            <a href="/forum/close_topic/{{ topic.id }}/{{ forum }}/" onclick="return confirm('{% trans "Close This Topic?" %}')">{% trans "Lock Topic" %}</a>
                    {% endif %}
                    {% ifnotequal topic.is_locked 1 %}
                     | <a href="/forum/move_topic/{{ topic.id }}/{{ forum }}/">{% trans "Move Topic" %}</a>
                     {% endifnotequal %}</td>
            {% endif %}
            </tr>
	    {% endfor %}
          </table>
</div>
{% if perms.add_topic %}
	<br /><div class="addTopic"><a href="/forum/add_topic/{{ forum }}/">{% trans "Add New Topic" %}</a></div>
{% endif %}
<br />


{% ifnotequal pages 1 %}
    <div class="box" style="text-align:center;">
    {% ifnotequal pages 0 %}
    {% ifnotequal pages 1 %}
    <a href="/forum/forum/{{ forum }}/"><b>{% trans "Latest Topics" %}</b></a> | 
    {% endifnotequal %}
    {% endifnotequal %}
    
    {% if has_previous %}
            <a href="/forum/forum/{{ forum }}/{{ previous }}/"><b>{% trans "Newer Topics" %} </b></a>
    {% endif %}
    
    {% if has_next %}
    <a href="/forum/forum/{{ forum }}/{{ next }}/"><b> {% trans "Older Topics" %}</b></a>
    {% endif %}
    
    {% ifnotequal pages 0 %}
    {% ifnotequal pages 1 %}
     | <a href="/forum/forum/{{ forum }}/{{ pages }}/"><b>{% trans "Oldest Topics" %}</b></a>
    {% endifnotequal %}
    {% endifnotequal %}
    </div>
{% endifnotequal %}
	<p style="text-align:right;">
	{% if perms.add_topic %}
		{% trans "You <b>can</b> post new Topics" %}<br />
	{% else %}
		{% trans "You <b>can't</b> post new Topics" %}<br />
	{% endif %}
	{% if perms.add_post %}
		{% trans "You <b>can</b> post new Posts" %}<br />
	{% else %}
		{% trans "You <b>can't</b> post new Posts" %}<br />
	{% endif %}
	{% if perms.is_staff %}
		{% trans "You <b>are</b> a Moderator" %}<br />
	{% else %}
		{% trans "You <b>aren't</b> a moderator" %}<br />
	{% endif %}
	</p>
{% endblock %}
