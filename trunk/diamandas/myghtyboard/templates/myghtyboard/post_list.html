{% extends "pages/body.html" %}
{% load i18n %}
{% load fbc %}
{% block title %}{{ forum_name }} - {{ topic }}{% endblock %}
{% block header %}{{ forum_name }} - {{ topic }}{% endblock %}
{% block crumb %}<a href="/">{% trans "Home" %}</a> > <a href="/forum/">{% trans "Forum Index" %}</a> > <a href="/forum/forum/{{ forum_id }}/">{{ forum_name }}</a> > <a href="/forum/topic/1/{{ topic_id }}">{{ topic }}</a>{% endblock %}

{% block pagemenu %}
	{% if opened %}
		<li><a href="/forum/add_post/{{ topic_id }}/">{% trans "Add Post" %}</a></li>
	{% endif %}
	<li><a href="/forum/">{% trans "Back to Forum" %}</a></li>
	<li><a href="/forum/lasttopics/">{% trans "Last Active Topics" %}</a></li>
	<li><a href="/forum/mytopics/">{% trans "My Topics" %}</a></li>
	<li><a href="/forum/myptopics/">{% trans "My Posts" %}</a></li>
{% endblock %}

{% block content %}

	{% for i in object_list %}
	<div class="post">
		    <div class="posthead">{{ i.post_date|date:"d.m.Y" }}</div>
		    <div class="leftpost">
			      <strong>{{ i.post_author}}</strong>
		    </div>
		    <div class="rightpost">	
			      {{ i.post_text|fbc|safe|urlizetrunc:"60" }}
		    </div>
		    <div class="leftbottompost">
			      {% if perms.is_staff %}{{ i.post_ip }}{% endif %}
		    </div>
		    <div class="rightbottompost">
			      {% if perms.add_post %}
				      {% if opened %}
					      <a href="/forum/add_post/{{ topic_id }}/{{ i.id }}/" class="quote">{% trans "Reply with quote" %}</a>
				      {% endif %}
			      {% endif %}
			      {% ifequal i.post_author current_user %}
				      {% if opened %}
					      {% ifnotequal i.post_author "AnonymousUser" %}
						      <a href="/forum/edit_post/{{ i.id }}/" class="edit">{% trans "Edit this post" %}</a>
					      {% endifnotequal %}
				      {% endif %} 
			      {% else %}
				      {% if perms.is_staff %}
					      <a href="/forum/edit_post/{{ i.id }}/" class="edit">{% trans "Edit this post" %}</a>
				      {% endif %}
			      {% endifequal %}
			      {% if perms.is_staff %}
					<a href="/forum/delete_post/{{ i.id }}/{{ topic_id }}/" onclick="return confirm('{% trans "Delete This Post?" %}')" class="delete">{% trans "Delete this post" %}</a>
			      {% endif %}
		    </div>
	</div>
	<br />
	{% endfor %}

{% if perms.add_post %}
	{% if opened %}
		<div class="addTopic"><a href="/forum/add_post/{{ topic_id }}/">{% trans "Add Post" %}</a></div>
	{% endif %}
{% endif %}
<br />

{% ifnotequal pages 1 %}
	<div class="box">
			<div style="text-align:center;">
			{% ifnotequal pages 0 %}
			{% ifnotequal pages 1 %}
			<a href="/forum/topic/1/{{ topic_id }}/"><b>{% trans "First Page" %}</b></a> | 
			{% endifnotequal %}
			{% endifnotequal %}
			
			{% if has_previous %}
				<a href="/forum/topic/{{ previous }}/{{ topic_id }}/"><b>{% trans "Previous Page" %} </b></a>
			{% endif %}
			
			{% if has_next %}
			<a href="/forum/topic/{{ next }}/{{ topic_id }}/"><b> {% trans "Next Page" %}</b></a>
			{% endif %}
			
			{% ifnotequal pages 0 %}
			{% ifnotequal pages 1 %}
			 | <a href="/forum/topic/{{ pages }}/{{ topic_id }}/"><b>{% trans "Last Page" %}</b></a>
			{% endifnotequal %}
			{% endifnotequal %}
			</div>
	</div>
{% endifnotequal %}
	<p style="text-align:right;">
	{% if perms.add_topic %}
		{% trans "You <b>can</b> post new Topics" %}<br />
	{% else %}
		{% trans "You <b>can't</b> post new Topics" %}<br />
	{% endif %}
	{% if perms.add_post %}
		{% trans "You <b>can</b> post new Posts" %}<br />
	{% else %}
		{% trans "You <b>can't</b> post new Posts" %}<br />
	{% endif %}
	{% if perms.is_staff %}
		{% trans "You <b>are</b> a Moderator" %}<br />
	{% else %}
		{% trans "You <b>aren't</b> a moderator" %}<br />
	{% endif %}
	</p>
{% if perms.add_post %}
{% if opened %}
<h2>{% trans "Quick Post" %}</h2>
<div class="box"><div style="text-align:center;"><form method="post" action="/forum/add_post/{{ topic_id }}/">
<a onclick='document.getElementById("id_text").value=document.getElementById("id_text").value+"<b></b>"'>{% trans "Bold" %}</a>,
			<a onclick='document.getElementById("id_text").value=document.getElementById("id_text").value+"<i></i>"'>{% trans "Italic" %}</a>, 
			<a onclick='document.getElementById("id_text").value=document.getElementById("id_text").value+"<u></u>"'>{% trans "Underline" %}</a>, 
			<a onclick='document.getElementById("id_text").value=document.getElementById("id_text").value+"<img src=\"URL\" alt=\"\" />"'>{% trans "Image" %}</a>,
			<a onclick='document.getElementById("id_text").value=document.getElementById("id_text").value+"<blockquote></blockquote>"'>{% trans "Blockquote" %}</a>,
			<a onclick='document.getElementById("id_text").value=document.getElementById("id_text").value+"[code]{% trans "Code Here" %}[/code]"'>{% trans "Code" %}</a> 
				<br />
				<a onclick="document.getElementById('id_text').value=document.getElementById('id_text').value+ ':omg:' "><img src="/site_media/layout/forum/smilies/icon_eek.gif" alt="" /></a> 
				<a onclick="document.getElementById('id_text').value=document.getElementById('id_text').value+ ':nice:' "><img src="/site_media/layout/forum/smilies/icon_biggrin.gif" alt="" /></a> 
				<a onclick="document.getElementById('id_text').value=document.getElementById('id_text').value+ ':evil:' "><img src="/site_media/layout/forum/smilies/icon_evil.gif" alt="" /></a>
				<a onclick="document.getElementById('id_text').value=document.getElementById('id_text').value+ ':twisted:' "><img src="/site_media/layout/forum/smilies/icon_twisted.gif" alt="" /></a> 
				<a onclick="document.getElementById('id_text').value=document.getElementById('id_text').value+ ':grin:' "><img src="/site_media/layout/forum/smilies/icon_cheesygrin.gif" alt="" /></a> 
				<a onclick="document.getElementById('id_text').value=document.getElementById('id_text').value+ ':cool:' "><img src="/site_media/layout/forum/smilies/icon_cool.gif" alt="" /></a> 
<br />
<div class="box">{% trans "Place code snippets inside [code][/code] tags !" %}</div>
<textarea rows="7" cols="70" name="post_text" id="id_text"></textarea>
</div></div>
<div class="box"><br /><div style="text-align:center;"><input type="submit" value="{% trans "Add Post" %}" style="actiontable"></div>
</form>
<br /><b>{% trans "Allowed HTML Tags" %}</b>: b, a, i, br, p, u, img, li, ul, ol, center, sub, sup, cite, blockquote<br /><br /></div>

{% endif %}{% endif %}

{% endblock %}